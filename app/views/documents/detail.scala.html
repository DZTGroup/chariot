@(document:template.Module)
@import com.google.gson.Gson;

<header>
    <hgroup id="doc">
        <h1 style="font-size:14px">@document.name</h1>
        <a style="float:right;text-decoration:underline" href="/service/download/@document.name">Download</a>
    </hgroup>
</header>
<article class="tasks">
    @displayQuestion(question:template.Question) = {
        <li>
            <h4>@question.context <a href="javascript:;" class="J_question_edit" data-id="@question.questionId">编辑问题</a></h4>
            <dl class="questions">
                @defining(Question.getById(question.questionId)){ q=>
                    @if(q!=null){
                        @defining(QuestionDescription.parse(q.description)){qd=>
                            <dt>@qd.content</dt>
                            @for(i <- 0 to (qd.options.length - 1)){
                            <dd>@(i+1).@qd.options(i)</dd>
                            }
                        }
                    }
                }
            </dl>
        </li>
    }

    @displayList(list:List[Object]) = {
        @for(item <- list){
            <div class="folder">
            @item match{
                case question : template.Question =>{
                    <ul class="list">
                        @displayQuestion(question)
                    </ul>
                }

                case module:template.Module =>{
                    <header>
                        <h3 style="display:block;"><a href="">@module.name</a><a style="float:right;text-decoration:underline" href="/service/download/@module.name">Download</a></h3>
                        <span class="loader">Loading</span>
                    </header>
                    <ul class="list">
                        <li>
                            @module.text
                        </li>
                    </ul>
                    @if(module.list!=null){
                        @displayList(module.list)
                    }
                }
            }
            </div>
        }
    }

    @if(document!=null){
        @displayList(document.list)
    }
</article>